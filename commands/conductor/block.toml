description = "Mark a task as blocked with a reason"
prompt = """
## BLOCK TASK

Mark a task as blocked.

### 1. Identify Task
- If argument provided, find that task in the current track's plan.md
- If no argument, show in-progress tasks and ask which to block

### 2. Get Reason
Ask: "What is blocking this task?"

### 3. Update Plan
Change `[~] Task name` to `[!] Task name [BLOCKED: reason]`

### 4. Sync with Beads
- Execute `which bd` to check if the Beads CLI is available
- If `bd` is not found, present the following prompt:
  > "⚠️ Beads CLI (`bd`) is not installed. Beads provides persistent task memory across sessions.
  > A) Continue without Beads sync
  > B) Stop - I'll install Beads first
  >
  > Please respond with A or B."
  - **If A:** Skip remaining Beads steps.
  - **If B:** HALT and wait for user to install Beads.
- If `bd` is found:
  - Read `beads_tasks` mapping from track's metadata.json
  - Generate task key from phase/task index (e.g., `phase1_task2`)
  - Look up `beads_task_id` from the mapping
  - If found, run: `bd update <beads_task_id> --status blocked --note "<reason>"`
  - If blocker is another task, create dependency: `bd dep add <blocked_task_id> <blocker_task_id>`
- **Error Handling:** If `bd` command fails:
  > "⚠️ Beads command failed: <error message>
  > A) Continue without Beads sync
  > B) Retry the failed command
  > C) Stop - I'll fix the issue first"
  - If A: Skip remaining Beads steps.
  - If B: Retry the command.
  - If C: HALT and wait for user.

### 5. Announce
"Task marked as blocked. Use `/conductor:status` to see all blockers."
"""
